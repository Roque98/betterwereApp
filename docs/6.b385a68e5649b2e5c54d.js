(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{A7IY:function(t,o,n){"use strict";n.r(o),n.d(o,"InventarioModule",function(){return J});var a=n("ofXK"),r=n("tyNb"),i=n("fXoL"),e=n("PnFU"),c=n("Rjhg"),d=n("3Pt+"),u=n("6K+g");function l(t,o){if(1&t&&(i.Kb(0,"div"),i.Kb(1,"blockquote",11),i.fc(2),i.Ub(3,"currency"),i.Jb(),i.Kb(4,"small",11),i.fc(5),i.Jb(),i.Jb()),2&t){const t=i.Tb();i.xb(2),i.hc("Precio ",i.Vb(3,2,t.data.producto.precio_especial),""),i.xb(3),i.gc(t.data.producto.condiciones_precio_especial)}}let s=(()=>{class t{constructor(){this.emitirEvento=new i.n,this.valorInput=1}ngOnInit(){}agregarStock(){this.valorInput<=0?alert("Debes agregar una cantidad mayor a 0"):this.emitirEvento.emit(this.valorInput)}removerStock(){this.valorInput<=0?alert("Debes retirar una cantidad de productos mayor a 0"):this.valorInput>this.data.producto.stock?alert("Debes retirar una cantidad de productos menor a la cantidad disponible de stock"):this.emitirEvento.emit(-this.valorInput)}cancelar(){this.emitirEvento.emit(0)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=i.Bb({type:t,selectors:[["app-modal-actualizar-inventario"]],inputs:{data:"data"},outputs:{emitirEvento:"emitirEvento"},decls:24,vars:11,consts:[[1,"container-modal","layout-modal","border","shadow--large"],[1,"layout-modal__element","modal__title"],[1,"bi","bi-arrow-left",3,"click"],[1,"layout-modal__element","modal__body"],["type","number","min","0","placeholder","numero de unidades",3,"ngModel","ngModelChange"],[3,"textoAyuda"],[1,"layout-modal__element","modal__precio"],[4,"ngIf"],[1,"layout-modal__element","modal__buttons"],[1,"btn--principal",3,"click"],[1,"btn--secundario",3,"click"],[1,"oferta"]],template:function(t,o){1&t&&(i.Kb(0,"div",0),i.Kb(1,"div",1),i.Kb(2,"i",2),i.Rb("click",function(){return o.cancelar()}),i.Jb(),i.Kb(3,"h2"),i.fc(4),i.Jb(),i.Kb(5,"h5"),i.fc(6),i.Jb(),i.Kb(7,"small"),i.fc(8),i.Jb(),i.Jb(),i.Kb(9,"div",3),i.Kb(10,"blockquote"),i.fc(11,"Cantidad"),i.Jb(),i.Kb(12,"input",4),i.Rb("ngModelChange",function(t){return o.valorInput=t}),i.Jb(),i.Ib(13,"app-texto-ayuda",5),i.Jb(),i.Kb(14,"div",6),i.Kb(15,"blockquote"),i.fc(16),i.Ub(17,"currency"),i.Jb(),i.ec(18,l,6,4,"div",7),i.Jb(),i.Kb(19,"div",8),i.Kb(20,"button",9),i.Rb("click",function(){return o.agregarStock()}),i.fc(21,"Agregar"),i.Jb(),i.Kb(22,"button",10),i.Rb("click",function(){return o.removerStock()}),i.fc(23,"Retirar"),i.Jb(),i.Jb(),i.Jb()),2&t&&(i.xb(4),i.gc(o.data.producto.nombre_producto),i.xb(2),i.hc("En stock: ",o.data.producto.stock,""),i.xb(2),i.hc("Codigo ",o.data.producto.codigo_producto,""),i.xb(4),i.Yb("ngModel",o.valorInput),i.xb(1),i.Yb("textoAyuda",o.data.textoAyuda),i.xb(3),i.hc("Precio $",i.Xb(17,7,o.data.producto.precio,"MXN","symbol"),""),i.xb(2),i.Yb("ngIf",o.data.producto.precio_especial))},directives:[d.j,d.a,d.g,d.i,u.a,a.k],pipes:[a.c],styles:[".container-modal[_ngcontent-%COMP%]{padding:var(--spacing-3)}.layout-modal[_ngcontent-%COMP%]{display:grid;row-gap:var(--spacing-4)}.layout-modal__element[_ngcontent-%COMP%]{display:grid;row-gap:var(--spacing-2)}.layout-modal[_ngcontent-%COMP%]   .modal__img[_ngcontent-%COMP%]{border-radius:var(--border-radius);width:80%;justify-self:center}.oferta[_ngcontent-%COMP%]{color:var(--color-oferta)}i[_ngcontent-%COMP%]{font-size:2rem}"]}),t})(),b=(()=>{class t{constructor(){this.emitirEvento=new i.n}ngOnInit(){}emitir(t){this.emitirEvento.emit(t)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=i.Bb({type:t,selectors:[["app-modal-confirmar"]],inputs:{data:"data"},outputs:{emitirEvento:"emitirEvento"},decls:13,vars:3,consts:[[1,"container-modal","layout-modal","border","shadow--large"],[1,"layout-modal__element","modal__title"],[1,"layout-modal__element","modal__img"],["alt","",3,"src"],[1,"layout-modal__element","modal__buttons"],[1,"text-center"],[1,"btn--principal",3,"click"],[1,"btn--secundario",3,"click"]],template:function(t,o){1&t&&(i.Kb(0,"div",0),i.Kb(1,"div",1),i.Kb(2,"h2"),i.fc(3),i.Jb(),i.Jb(),i.Kb(4,"div",2),i.Ib(5,"img",3),i.Jb(),i.Kb(6,"div",4),i.Kb(7,"h5",5),i.fc(8),i.Jb(),i.Kb(9,"button",6),i.Rb("click",function(){return o.emitir(!0)}),i.fc(10,"si"),i.Jb(),i.Kb(11,"button",7),i.Rb("click",function(){return o.emitir(!1)}),i.fc(12,"no"),i.Jb(),i.Jb(),i.Jb()),2&t&&(i.xb(3),i.gc(o.data.producto.nombre_producto),i.xb(2),i.Yb("src",o.data.producto.url_fotografia,i.bc),i.xb(3),i.gc(o.data.textoAyuda))},styles:[".container-modal[_ngcontent-%COMP%]{padding:var(--spacing-3)}.layout-modal[_ngcontent-%COMP%]{display:grid;row-gap:var(--spacing-5)}.layout-modal__element[_ngcontent-%COMP%]{display:grid;row-gap:var(--spacing-2)}.layout-modal[_ngcontent-%COMP%]   .modal__img[_ngcontent-%COMP%]{border-radius:var(--border-radius);width:80%;justify-self:center}@media (min-width:576px){.layout-modal[_ngcontent-%COMP%]   .modal__img[_ngcontent-%COMP%]{width:40%}}@media (min-width:768px){.layout-modal[_ngcontent-%COMP%]   .modal__img[_ngcontent-%COMP%]{width:25%}}"]}),t})();function p(t,o){if(1&t){const t=i.Lb();i.Kb(0,"app-lector-codigo-barras",7),i.Rb("newItemEvent",function(o){return i.ac(t),i.Tb().addItem(o)}),i.Jb()}}let m=(()=>{class t{constructor(){this.contenidoInputEmmiter=new i.n,this.contenidoInput="",this.scanerDisponible=!1}ngOnInit(){}emitirCambio(){this.contenidoInputEmmiter.emit(this.contenidoInput)}iniciarScanner(){this.scanerDisponible=!0}addItem(t){this.contenidoInput=t,this.scanerDisponible=!1,this.emitirCambio()}clearInput(){this.contenidoInput=""}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=i.Bb({type:t,selectors:[["app-barra-busqueda"]],outputs:{contenidoInputEmmiter:"contenidoInputEmmiter"},decls:8,vars:2,consts:[[1,"barra-busqueda","layout"],[1,"input-container"],["type","text","placeholder","codigo, nombre",1,"input-search",3,"ngModel","ngModelChange","keyup"],[1,"button-clear-input",3,"click"],[1,"icons"],[1,"bi","bi-upc-scan",3,"click"],[3,"newItemEvent",4,"ngIf"],[3,"newItemEvent"]],template:function(t,o){1&t&&(i.Kb(0,"div",0),i.Kb(1,"div",1),i.Kb(2,"input",2),i.Rb("ngModelChange",function(t){return o.contenidoInput=t})("keyup",function(){return o.emitirCambio()}),i.Jb(),i.Kb(3,"button",3),i.Rb("click",function(){return o.clearInput()}),i.fc(4,"x"),i.Jb(),i.Jb(),i.Kb(5,"div",4),i.Kb(6,"i",5),i.Rb("click",function(){return o.iniciarScanner()}),i.Jb(),i.Jb(),i.Jb(),i.ec(7,p,1,0,"app-lector-codigo-barras",6)),2&t&&(i.xb(2),i.Yb("ngModel",o.contenidoInput),i.xb(5),i.Yb("ngIf",o.scanerDisponible))},directives:[d.a,d.g,d.i,a.k],styles:[".layout[_ngcontent-%COMP%]{grid-template-columns:repeat(8,1fr)}i[_ngcontent-%COMP%]{color:#6c757d;font-size:25px;padding:var(--spacing-1)}.input-container[_ngcontent-%COMP%]{grid-column:1/8;width:100%;display:grid;grid-template-columns:repeat(8,1fr)}.input-search[_ngcontent-%COMP%]{grid-column:1/9;grid-row:1/2}.button-clear-input[_ngcontent-%COMP%]{grid-column:8/9;grid-row:1/2;background-color:#adb5bd}.icons[_ngcontent-%COMP%]{grid-column:8/9;display:flex}"]}),t})(),g=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=i.Bb({type:t,selectors:[["app-card-producto"]],inputs:{producto:"producto"},decls:6,vars:3,consts:[[1,"card-product","layout","border","hvr-grow"],["alt","",1,"card-product__img",3,"src"],[1,"card-product__name-product"],[1,"card-product__stock"]],template:function(t,o){1&t&&(i.Kb(0,"div",0),i.Ib(1,"img",1),i.Kb(2,"div",2),i.fc(3),i.Jb(),i.Kb(4,"div",3),i.fc(5),i.Jb(),i.Jb()),2&t&&(i.xb(1),i.Yb("src",o.producto.url_fotografia,i.bc),i.xb(2),i.gc(o.producto.nombre_producto),i.xb(2),i.gc(o.producto.stock))},styles:[".card-product[_ngcontent-%COMP%]{column-gap:var(--spacing-1)}.card-product__img[_ngcontent-%COMP%]{height:60px;grid-column:1/2;border-radius:4px}.card-product__name-product[_ngcontent-%COMP%]{grid-column:2/4;justify-self:start}.card-product__stock[_ngcontent-%COMP%]{grid-column:4/5}"]}),t})();var f=n("K2AU");function v(t,o){1&t&&i.Ib(0,"app-navigation",3),2&t&&i.Yb("url","/home")("title","inventario")}function h(t,o){if(1&t){const t=i.Lb();i.Kb(0,"app-modal-actualizar-inventario",4),i.Rb("emitirEvento",function(o){return i.ac(t),i.Tb().recibirDataModalAgregar(o)}),i.Jb()}if(2&t){const t=i.Tb();i.Yb("data",t.modalActualizarInventario)}}function _(t,o){if(1&t){const t=i.Lb();i.Kb(0,"app-modal-confirmar",4),i.Rb("emitirEvento",function(o){return i.ac(t),i.Tb().cerrarModalConfirmar(o)}),i.Jb()}if(2&t){const t=i.Tb();i.Yb("data",t.modalConfirmar)}}function I(t,o){if(1&t){const t=i.Lb();i.Kb(0,"app-card-producto",12),i.Rb("click",function(){i.ac(t);const n=o.$implicit;return i.Tb(3).abrirModal(n)}),i.Jb()}2&t&&i.Yb("producto",o.$implicit)}function y(t,o){if(1&t&&(i.Kb(0,"div",10),i.ec(1,I,1,1,"app-card-producto",11),i.Jb()),2&t){const t=i.Tb(2);i.xb(1),i.Yb("ngForOf",t.productos)}}function C(t,o){1&t&&i.Ib(0,"app-loader")}function k(t,o){if(1&t){const t=i.Lb();i.Kb(0,"div",5),i.Kb(1,"app-barra-busqueda",6),i.Rb("contenidoInputEmmiter",function(o){return i.ac(t),i.Tb().actualizarValorDeBusqueda(o)}),i.Jb(),i.ec(2,y,2,1,"div",7),i.ec(3,C,1,0,"app-loader",8),i.Ib(4,"app-texto-ayuda",9),i.Jb()}if(2&t){const t=i.Tb();i.xb(2),i.Yb("ngIf",t.productos&&!t.cargando),i.xb(1),i.Yb("ngIf",t.cargando),i.xb(1),i.Yb("textoAyuda",t.textoAyuda)}}const x=[{path:"",component:(()=>{class t{constructor(t){this.productoService=t,this.cargando=!1,this.error="",this.productoBuscado="",this.modalActualizarInventario={visible:!1,textoAyuda:"Cantidad  de productos que se van a agreagar o retirar del inventario"},this.modalConfirmar={visible:!1,textoAyuda:""},this.textoAyuda="Busca un producto, seleccionalo e introduce la cantidad de productos que se agregaran o retiraran del inventario"}ngOnInit(){}actualizarValorDeBusqueda(t){this.productoBuscado=t,this.error="",this.getProductos()}getProductos(){this.cargando=!0,this.productoService.getProductos(this.productoBuscado).then(t=>{this.productos=t.data,this.productos.forEach(t=>{t.stock||(t.stock=0)})}).catch(t=>{this.error=t.message}).finally(()=>{this.cargando=!1})}abrirModal(t){this.modalActualizarInventario.producto=t,this.modalConfirmar.producto=t,this.modalActualizarInventario.visible=!0}recibirDataModalAgregar(t){let o="";this.modalActualizarInventario.visible=!1,this.stockNuevo=t,this.stockActual=this.modalActualizarInventario.producto.stock,0!==t&&(o=t>0?"agregar":"retirar",this.modalConfirmar.textoAyuda=`\xbfEsta seguro de ${o} ${this.stockNuevo} unidades?`,this.modalConfirmar.visible=!0)}cerrarModalConfirmar(t){this.modalConfirmar.visible=!1,t?this.updateInventario(this.modalConfirmar.producto.codigo_producto,this.stockNuevo+this.stockActual,this.modalActualizarInventario.producto.nombre_producto,this.stockNuevo>0?"entrada":"salida",this.stockNuevo):this.modalActualizarInventario.visible=!0}updateInventario(t,o,n,a,r){this.cargando=!0,this.productoService.setStock(t,o,{nombre_producto:n,tipo_operacion:a,cantidad:r}).then(o=>{this.actualizarValorDeBusqueda(t)}).finally(()=>{this.cargando=!1})}}return t.\u0275fac=function(o){return new(o||t)(i.Hb(e.a))},t.\u0275cmp=i.Bb({type:t,selectors:[["app-inventario"]],decls:4,vars:4,consts:[[3,"url","title",4,"ngIf"],[3,"data","emitirEvento",4,"ngIf"],["class","container fadeIn",4,"ngIf"],[3,"url","title"],[3,"data","emitirEvento"],[1,"container","fadeIn"],[3,"contenidoInputEmmiter"],["class","card-group fadeIn",4,"ngIf"],[4,"ngIf"],[3,"textoAyuda"],[1,"card-group","fadeIn"],[3,"producto","click",4,"ngFor","ngForOf"],[3,"producto","click"]],template:function(t,o){1&t&&(i.ec(0,v,1,2,"app-navigation",0),i.ec(1,h,1,1,"app-modal-actualizar-inventario",1),i.ec(2,_,1,1,"app-modal-confirmar",1),i.ec(3,k,5,3,"div",2)),2&t&&(i.Yb("ngIf",!(o.modalActualizarInventario.visible||o.modalConfirmar.visible)),i.xb(1),i.Yb("ngIf",o.modalActualizarInventario.visible),i.xb(1),i.Yb("ngIf",o.modalConfirmar.visible),i.xb(1),i.Yb("ngIf",!(o.modalActualizarInventario.visible||o.modalConfirmar.visible)))},directives:[a.k,c.a,s,b,m,u.a,a.j,g,f.a],styles:[".card-group[_ngcontent-%COMP%]{display:grid;row-gap:var(--spacing-2);column-gap:var(--spacing-2)}@media (min-width:576px){.card-group[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width:768px){.card-group[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]}),t})()},{path:"**",redirectTo:""}];let M=(()=>{class t{}return t.\u0275mod=i.Fb({type:t}),t.\u0275inj=i.Eb({factory:function(o){return new(o||t)},imports:[[r.c.forChild(x)],r.c]}),t})();var K=n("b/4Z");let J=(()=>{class t{}return t.\u0275mod=i.Fb({type:t}),t.\u0275inj=i.Eb({factory:function(o){return new(o||t)},imports:[[a.b,M,K.a]]}),t})()}}]);